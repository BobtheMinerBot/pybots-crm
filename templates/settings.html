{% extends 'base.html' %}

{% block title %}Settings - CRM{% endblock %}

{% block content %}
<div class="card" style="max-width: 600px;">
    <div class="card-header">
        <h2>Settings</h2>
    </div>
    <div class="card-body">
        <form method="POST">
            <div class="form-group">
                <label class="form-label">Zapier Webhook URL</label>
                <input type="url" name="zapier_webhook" class="form-control" 
                       value="{{ zapier_webhook }}"
                       placeholder="https://hooks.zapier.com/hooks/catch/...">
                <p class="text-muted text-sm" style="margin-top: 0.5rem;">
                    Paste your Zapier webhook URL here. A POST request will be sent whenever a new lead is added.
                </p>
            </div>
            
            <button type="submit" class="btn btn-primary">Save Settings</button>
        </form>
        
        <hr style="margin: 2rem 0; border: none; border-top: 1px solid var(--gray-200);">
        
        <h3 style="font-size: 1rem; margin-bottom: 1rem;">Webhook Payload Format</h3>
        <p class="text-sm text-muted" style="margin-bottom: 0.5rem;">When a new lead is created, the following JSON is sent:</p>
        <pre style="background: var(--gray-100); padding: 1rem; border-radius: 0.375rem; font-size: 0.8125rem; overflow-x: auto;">
{
  "id": 1,
  "name": "John Smith",
  "email": "john@example.com",
  "phone": "305-555-1234",
  "address": "123 Ocean Dr, Key West, FL",
  "job_type": "Spalling Repair",
  "property_type": "Residential",
  "status": "New Lead",
  "notes": "...",
  "created_at": "2024-01-15T10:30:00"
}</pre>
    </div>
</div>

<div class="card" style="max-width: 600px; margin-top: 1.5rem;">
    <div class="card-header">
        <h2>Account</h2>
    </div>
    <div class="card-body">
        <p class="text-muted">Logged in as <strong>{{ session.user_name }}</strong></p>
        <p class="text-sm text-muted" style="margin-top: 1rem;">
            To change your password or add new users, contact your administrator.
        </p>
    </div>
</div>
{% endblock %}
